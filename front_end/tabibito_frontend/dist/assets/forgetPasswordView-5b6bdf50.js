import{N as y}from"./navigationBar-a86738af.js";import{F as z}from"./footerView-d7f3339b.js";import{_ as A,g as C,u as Z,r as c,o as h,c as p,a as d,b as t,w as m,t as i,d as u,e as f,v as g,h as T,i as V,F as I,p as E,f as k}from"./index-24337c0d.js";const $={setup(){const e=C().appContext.config.globalProperties.axios;return e.defaults.withCredentials=!0,{toast:Z()}},components:{FooterView:z,navigationBar:y},name:"forgetPasswordView",data(){return{countingDown:!1,remainingTime:60,countdownInterval:null,inputE:"",code:""}},methods:{startCountdown(){let e=this;this.countingDown=!0,this.remainingTime=60,this.countdownInterval=setInterval(()=>{this.remainingTime>0?this.remainingTime--:(clearInterval(this.countdownInterval),this.countingDown=!1)},1e3);let o=this.inputE;/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(o)?(this.toast.success("Captcha sends successfully"),this.axios.post("/user/captcha",{email:o}).then(function(r){let s=r.data.code,a=r.data.message;s===200?e.toast.success("Captcha sends successfully"):s===400&&a==="email"&&e.toast.error("Email is not registered")}).catch(function(r){console.log(r)})):e.toast.error("This email is not valid")},verify(){let e=this,o=this.inputE,_=this.code;this.inputE===""&&this.toast.error("The email can't be blank"),/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.inputEmail1)||this.toast.error("This email is not valid"),this.axios.post("/user/forget_form_email",{email:o,verifyCode:_}).then(function(s){let a=s.data.code,l=s.data.message;a===200?(console.log("成功"),e.$router.push("/reset")):a===400&&(l==="captcha"&&e.toast.error("The verification code is not correctly"),l==="email"&&e.toast.error("This email is not valid"))}).catch(function(s){console.log(s)})}}},D=e=>(E("data-v-3a6cbf99"),e=e(),k(),e),x={class:"bg"},N={class:"container"},B={class:"border"},S={class:"font_login"},F={class:"font_acc"},P={autocomplete:"off"},q={class:"input_border"},U={class:"input_form"},G={class:"input_label"},M={class:"input_border"},j={class:"input_form"},H={class:"half_1"},J={class:"input_label"},K={class:"half_2"},L={key:0,class:"add_step_btn verify"},O={class:"input_border"},Q={class:"input_border"},R={class:"text_center"},W={class:"other_login_btn"},X=D(()=>t("i",{class:"google_icon"},null,-1)),Y={class:"input_border"},tt={class:"text_note"};function et(e,o,_,r,s,a){const l=c("navigation-bar"),v=c("router-link"),b=c("n-card"),w=c("footer-view");return h(),p(I,null,[d(l),t("div",x,[t("div",N,[d(b,{class:"card"},{default:m(()=>[t("div",B,[t("h1",S,i(e.$t("forget.res")),1),t("p",F,[u(i(e.$t("forget.rem"))+" ",1),d(v,{to:"/login",class:"font_blue"},{default:m(()=>[u(i(e.$t("forget.log")),1)]),_:1})]),t("form",P,[t("div",q,[t("div",U,[f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>s.inputE=n),required:""},null,512),[[g,s.inputE]]),t("label",G,i(e.$t("forget.email")),1)])]),t("div",M,[t("div",j,[t("div",H,[f(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=n=>s.code=n),required:""},null,512),[[g,s.code]]),t("label",J,i(e.$t("forget.veri")),1)]),t("div",K,[f(t("a",{class:"add_step_btn verify",onClick:o[2]||(o[2]=(...n)=>a.startCountdown&&a.startCountdown(...n))},i(e.$t("forget.get")),513),[[T,!s.countingDown]]),s.countingDown?(h(),p("a",L,i(s.remainingTime)+" s ",1)):V("",!0)])])]),t("div",O,[t("button",{type:"submit",class:"add_step_btn c",onClick:o[3]||(o[3]=(...n)=>a.verify&&a.verify(...n))},i(e.$t("forget.conti")),1)])]),t("div",Q,[t("div",R,i(e.$t("forget.or")),1),t("button",W,[X,u(" "+i(e.$t("forget.Google")),1)])]),t("div",Y,[t("div",tt,i(e.$t("forget.reset")),1)])])]),_:1})])]),d(w)],64)}const at=A($,[["render",et],["__scopeId","data-v-3a6cbf99"]]);export{at as default};
