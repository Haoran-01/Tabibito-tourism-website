import{L as e}from"./index.esm-edc83051.js";import{_ as a,z as l,r as t,u as o,E as s,a as n,b as u,o as i,c as r,d as c,e as d,w as p,t as v,i as h,F as m,f as g,h as y,p as _,k}from"./index-4a8fe44e.js";import{N as w}from"./navigationBar-68b72f27.js";import{H as b,L as T,T as f,C as P,S,a as $,b as C}from"./TodayOutline-c2d1cf50.js";import{A as I}from"./ArrowForward-47f30331.js";const z=l({name:"leftListView",components:{NavigationBar:w,HeartOutline:b,LocationOutline:T,TodayOutline:f,CompassOutline:P,Search:S,StatsChartOutline:$,Star:C,ArrowForward:I},setup(){const a=t(1),l=t(1),u=t(3),i=t(),r=t(),c=t(),d=t(),p=t(),v=t();let h=null;const m=[],g=t([]),y=o();let _="en-US";"zh"===y.language&&(_="zh-CN");const k=t(!1);s(),n.post("/search/product_list",{page:a.value,currentLocation:null,startTime:null,endTime:null,tourType:null,price:null,duration:null}).then((e=>{if(200===e.status){g.value=e.data.products;for(let e=0;e<g.value.length;e++){let a=g.value[e].duration,l=Math.round(a/3600),t=Math.round(l/24);l>24&&1===t&&(g.value[e].duration="1 Day"),l>24&&t>1&&(g.value[e].duration=t+" Days"),1===l&&(g.value[e].duration="1 Hour"),l<24&&1!==l&&(g.value[e].duration=l+" Hours")}}h={lat:g.value[0].map_latitude,lng:g.value[0].map_longitude};for(let a=0;a<g.value.length;a++)m.push({position:{lat:g.value[a].map_latitude,lng:g.value[a].map_longitude},title:g.value[a].title});w()})),n.post("/search/product_number",{currentLocation:null,startTime:null,endTime:null,tourType:null,price:null,duration:null}).then((e=>{const a=e.status;if(200===a||201===a){const a=e.data.number;l.value=Math.ceil(a/3)}}));const w=()=>{new e({apiKey:"AIzaSyBctzU8ocpP_0j4IdTRqA-GABIAnaXd0ow",version:"beta",libraries:["marker"],language:_}).load().then((e=>{const a=h;let l=new e.maps.Map(document.getElementById("map"),{center:a,zoom:1,mapId:"jkhjkhkjhjkh"});const t=m,o=new e.maps.InfoWindow;t.forEach((({position:a,title:t},s)=>{const n=new e.maps.marker.PinView({glyph:`${s+1}`}),u=new e.maps.marker.AdvancedMarkerView({position:a,map:l,title:`${s+1}. ${t}`,content:n.element});u.addListener("click",(({domEvent:e,latLng:a})=>{o.close(),o.setContent(u.title),o.open(u.map,u)}))}))}))};return{searchPage:a,searchPages:l,searchNumber:0,searchPageSize:u,loadMap:w,products:g,project_loc:h,project_zoom:1,locations:m,currentLocation:i,startTime:r,endTime:c,tourType:d,price:p,duration:v,secureStartTime:e=>null!=c.value?e<Date.now()||e>c.value:e<Date.now(),secureEndTime:e=>null!=r.value?e<Date.now()||e<r.value:e<Date.now(),handleClick(){k.value=!0,setTimeout((()=>{k.value=!1}),2e3)},handleSearchProject(){n.post("/search/product_list",{page:a.value,currentLocation:i.value||null,startTime:r.value||null,endTime:c.value||null,tourType:d.value||null,price:p.value||null,duration:v.value||null}).then((e=>{if(200===e.status){g.value=e.data.products;for(let e=0;e<g.value.length;e++){let a=g.value[e].duration,l=Math.round(a/3600),t=Math.round(l/24);l>24&&1===t&&(g.value[e].duration="1 Day"),l>24&&t>1&&(g.value[e].duration=t+" Days"),1===l&&(g.value[e].duration="1 Hour"),l<24&&1!==l&&(g.value[e].duration=l+" Hours")}}h={lat:g.value[0].map_latitude,lng:g.value[0].map_longitude};for(let a=0;a<g.value.length;a++)m.push({position:{lat:g.value[a].map_latitude,lng:g.value[a].map_longitude},title:g.value[a].title});w()})),n.post("/search/product_number",{currentLocation:i.value||null,startTime:r.value||null,endTime:c.value||null,tourType:d.value||null,price:p.value||null,duration:v.value||null}).then((e=>{if(200===e.status){const a=e.data.number;l.value=Math.ceil(a/3)}}))},handleChangePage(){n.post("/search/product_list",{currentLocation:i.value||null,startTime:r.value||null,endTime:c.value||null,tourType:d.value||null,price:p.value||null,duration:v.value||null,page:a.value}).then((e=>{if(200===e.status){g.value=e.data.products;for(let e=0;e<g.value.length;e++){let a=g.value[e].duration,l=Math.round(a/3600),t=Math.round(l/24);l>24&&1===t&&(g.value[e].duration="1 Day"),l>24&&t>1&&(g.value[e].duration=t+" Days"),1===l&&(g.value[e].duration="1 Hour"),l<24&&1!==l&&(g.value[e].duration=l+" Hours")}h={lat:g.value[0].map_latitude,lng:g.value[0].map_longitude};for(let e=0;e<g.value.length;e++)m.push({position:{lat:g.value[e].map_latitude,lng:g.value[e].map_longitude},title:g.value[e].title});w()}}))}}},data:()=>({priceoptions:[{label:"Less than $500",value:"-500",key:"-500"},{label:"$500 - $1000",value:"500-1000",key:"500-1000"},{label:"$1000 - $2000",value:"1000-2000",key:"1000-2000"},{label:"$2000+",value:"2000+",key:"2000+"}],durationoptions:[{label:"1 week",value:"1 week",key:"1 week"},{label:"2 weeks",value:"2 weeks",key:"2 weeks"},{label:"3 weeks",value:"3 weeks",key:"3 weeks"},{label:"1 month",value:"1 month",key:"1 month"}],languageoptions:[{label:"English",value:"English",key:"English"},{label:"Italian",value:"Italian",key:"Italian"},{label:"Deutsch",value:"Deutsch",key:"Deutsch"},{label:"Turkish",value:"Turkish",key:"Turkish"}],locOptions:[{label:"Australia",key:"Australia",value:"Australia"},{label:"China",key:"China",value:"China"},{label:"United Kingdom",key:"United Kingdom",value:"United Kingdom"},{label:"Ireland",key:"Ireland",value:"Ireland"},{label:"Italy",key:"Italy",value:"Italy"},{label:"France",key:"France",value:"France"},{label:"Japan",key:"Japan",value:"Japan"}],typeOptions:[{label:"Wildlife Tour",key:"WildlifeTour",value:"WildlifeTour"},{label:"Adventure Tour",key:"AdventureTour",value:"AdventureTour"},{label:"City Tour",key:"CityTour",value:"CityTour"},{label:"Museum Tour",key:"MuseumTour",value:"MuseumTour"},{label:"Beaches Tour",key:"BeachesTour",value:"BeachesTour"}],sortoptions:[{label:"discount (high to low)",key:"discount (high to low)"},{label:"discount (low to high)",key:"discount (low to high)"},{label:"price (high to low)",key:"price (high to low)"},{label:"price (low to high)",key:"price (low to high)"}]})}),L=e=>(_("data-v-ca79c0db"),e=e(),k(),e),A={class:"halfMap"},D={class:"list_content"},M={class:"list_search_wrap"},O={class:"list_search"},U={class:"loc_wrap"},j={class:"loc_head"},E={class:"loc_margin"},H={class:"loc_title"},B={class:"loc_input"},x={class:"date_wrap"},F={class:"loc_head"},K={class:"loc_margin"},N={class:"loc_title"},W={class:"loc_input"},J=L((()=>d("span",null,"-",-1))),V={class:"guests_wrap"},q={class:"loc_head"},G={class:"loc_margin"},R={class:"loc_title"},X={class:"loc_input"},Q={class:"search_btn"},Y={class:"row x-gap-10 y-gap-10 select_menu"},Z={class:"row y-gap-10 property"},ee={class:"col-auto"},ae={class:"property_text"},le={class:"property_num"},te={class:"row y-gap-20 contents_wrap"},oe={class:"col-12"},se={class:"content_wrap"},ne={class:"col-md-auto"},ue={class:"content_left ratio ratio-1:1"},ie={class:"cardImage_content"},re=["src"],ce={class:"cardImage_wish"},de={class:"col-md"},pe={class:"hours"},ve={class:"title"},he={class:"location"},me={class:"opt1"},ge={class:"opt2"},ye={class:"col-md-auto content_right"},_e={class:"stars x-gap-10"},ke={class:"reviews"},we={class:"from"},be={class:"price"},Te={class:"per"},fe=["onClick"],Pe=L((()=>d("div",{class:"map_content"},[d("div",{class:"map",id:"map"})],-1)));const Se=a(z,[["render",function(e,a,l,t,o,s){const n=u("navigation-bar"),_=u("LocationOutline"),k=u("n-icon"),w=u("n-select"),b=u("TodayOutline"),T=u("n-date-picker"),f=u("CompassOutline"),P=u("Search"),S=u("n-button"),$=u("HeartOutline"),C=u("Star"),I=u("ArrowForward"),z=u("n-pagination");return i(),r(m,null,[c(n,{class:"zup"}),d("div",A,[d("div",D,[d("div",M,[d("div",O,[d("div",U,[d("div",j,[c(k,{class:"icon_loc"},{default:p((()=>[c(_)])),_:1}),d("div",E,[d("h4",H,v(e.$t("searchPage.destinations")),1),d("div",B,[c(w,{class:"dropdown",value:e.currentLocation,"onUpdate:value":a[0]||(a[0]=a=>e.currentLocation=a),options:e.locOptions,clearable:"",placeholder:e.$t("searchPage.select"),onSelect:e.handleSelectLoc},null,8,["value","options","placeholder","onSelect"])])])])]),d("div",x,[d("div",F,[c(k,{class:"icon_loc"},{default:p((()=>[c(b)])),_:1}),d("div",K,[d("h4",N,v(e.$t("searchPage.checkInCheckOut")),1),d("div",W,[c(T,{value:e.startTime,"onUpdate:value":a[1]||(a[1]=a=>e.startTime=a),type:"date","is-date-disabled":e.secureStartTime,size:"small",clearable:"",placeholder:e.$t("homepage.searchPart.st")},null,8,["value","is-date-disabled","placeholder"]),J,c(T,{value:e.endTime,"onUpdate:value":a[2]||(a[2]=a=>e.endTime=a),type:"date",placement:"bottom-end","is-date-disabled":e.secureEndTime,size:"small",clearable:"",placeholder:e.$t("homepage.searchPart.et")},null,8,["value","is-date-disabled","placeholder"])])])])]),d("div",V,[d("div",q,[c(k,{class:"icon_loc"},{default:p((()=>[c(f)])),_:1}),d("div",G,[d("h4",R,v(e.$t("searchPage.tourType")),1),d("div",X,[c(w,{class:"dropdown",value:e.tourType,"onUpdate:value":a[3]||(a[3]=a=>e.tourType=a),options:e.typeOptions,clearable:"",placeholder:e.$t("searchPage.tourType"),onSelect:e.handleSelectType},null,8,["value","options","placeholder","onSelect"])])])])]),d("div",Q,[c(S,{class:"btn_search",color:"#3554D1",onClick:e.handleSearchProject},{default:p((()=>[c(k,{class:"icon_search"},{default:p((()=>[c(P)])),_:1})])),_:1},8,["onClick"])])])]),d("div",Y,[c(w,{class:"dropdown",value:e.price,"onUpdate:value":a[4]||(a[4]=a=>e.price=a),options:e.priceoptions,clearable:"",placeholder:e.$t("searchPage.price"),onSelect:e.handleSelectPrice},null,8,["value","options","placeholder","onSelect"]),c(w,{class:"dropdown",value:e.duration,"onUpdate:value":a[5]||(a[5]=a=>e.duration=a),options:e.durationoptions,clearable:"",placeholder:e.$t("searchPage.duration"),onSelect:e.handleSelectDuration},null,8,["value","options","placeholder","onSelect"])]),d("div",Z,[d("div",ee,[d("div",ae,[d("span",le,v(e.$t("searchPage.3269Properties")),1),h(" "+v(e.$t("searchPage.inEurope")),1)])])]),d("div",te,[d("div",oe,[d("div",se,[(i(!0),r(m,null,g(e.products,(a=>(i(),r("div",{class:"row x-gap-20 y-gap-20",key:a.id},[d("div",ne,[d("div",ue,[d("div",ie,[d("img",{class:"cardImage col-12",src:a.image},null,8,re)]),d("div",ce,[c(S,{loading:!1,onClick:e.handleClick,strong:"",secondary:"",circle:"",type:"info"},{icon:p((()=>[c(k,null,{default:p((()=>[c($)])),_:1})])),_:1},8,["onClick"])])])]),d("div",de,[d("p",pe,v(a.duration),1),d("h3",ve,v(a.title),1),d("p",he,v(a.location),1),d("div",me,v(a.types[0]),1),d("div",ge,v(a.types[1]),1)]),d("div",ye,[d("div",_e,[(i(!0),r(m,null,g(a.stars,(e=>(i(),y(k,{class:"star",key:e},{default:p((()=>[c(C)])),_:2},1024)))),128))]),d("div",ke,v(e.$t("mostPopularTours.reviews",{reviews:a.reviews})),1),d("div",we,v(e.$t("discount.from")),1),d("div",be,"US$"+v(a.price),1),d("div",Te,v(e.$t("searchPage.perAdult")),1),d("a",{class:"button -dark-1 btn_detail",onClick:e=>this.$router.push("/trip/"+a.id)},[h(v(e.$t("searchPage.viewDetail"))+" ",1),c(k,{class:"margin"},{default:p((()=>[c(I)])),_:1})],8,fe)])])))),128))])])]),c(z,{class:"pag",page:e.searchPage,"onUpdate:page":[a[6]||(a[6]=a=>e.searchPage=a),e.handleChangePage],"page-count":e.searchPages,"page-size":e.searchPageSize,"onUpdate:pageSize":a[7]||(a[7]=a=>e.searchPageSize=a),size:"small"},null,8,["page","page-count","page-size","onUpdate:page"])]),Pe])],64)}],["__scopeId","data-v-ca79c0db"]]);export{Se as default};
